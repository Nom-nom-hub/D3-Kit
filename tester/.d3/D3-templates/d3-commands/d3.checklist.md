---
description: Generate custom quality checklists that validate requirements completeness, clarity, and consistency (like "unit tests for specifications").
handoffs:
  - label: Apply Quality Checklist
    agent: d3.analyze
    prompt: Run analysis using this quality checklist
    send: true
  - label: Improve Specification
    agent: d3.clarify
    prompt: Address items identified in the quality checklist
    send: true
scripts:
  sh: scripts/bash/d3-checklist.sh --json
  ps: scripts/powershell/d3-checklist.ps1 -Json
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## Outline

The `/d3.checklist` command generates custom quality checklists that validate D3 specifications, plans, and tasks for completeness, clarity, and consistency. These checklists function like "unit tests for specifications" to ensure high-quality artifacts.

Given the current feature directory and optional domain context in `$ARGUMENTS`, do this:

1. **Setup**: Run `{SCRIPT}` from repo root and parse JSON for FEATURE_DIR, CHECKLIST_DIR, and DOMAIN_CONTEXT.

2. **Analyze existing artifacts**: Read from FEATURE_DIR:
   - `spec.md`: Feature specification with developer intent and coding slices
   - `plan.md`: Technical implementation plan 
   - `tasks.md`: Actionable task list organized by coding slices
   - `research.md`: Technical research and decisions (if exists)
   - Additional artifacts as available

3. **Generate domain-specific quality checklist** based on `$ARGUMENTS` and artifact analysis:

   a. **If domain specified in $ARGUMENTS** (e.g., "web application", "mobile app", "backend API"):
      - Include domain-specific quality checks
      - Add domain-appropriate validation criteria
      - Include domain-specific best practices

   b. **If no domain specified, generate general D3 quality checklist**:
      - General specification quality
      - D3-Kit principles compliance
      - Traceability checks
      - Implementation readiness

4. **Create comprehensive checklist** in `checklists/[domain-context]-quality.md` with sections:

   a. **Specification Quality**:
      - [ ] No implementation details (languages, frameworks, APIs) in spec
      - [ ] Focused on user value and developer intent
      - [ ] All coding slices have clear developer intent statements
      - [ ] All coding slices are independently testable
      - [ ] Acceptance scenarios clearly defined for each slice
      - [ ] Success criteria are measurable and technology-agnostic

   b. **Intent Alignment**:
      - [ ] Original developer intent clearly reflected in all slices
      - [ ] All requirements support the core developer intent
      - [ ] Success criteria measure the intended impact
      - [ ] No scope creep from original intent
      - [ ] Each slice serves the original developer intent

   c. **Completeness & Clarity**:
      - [ ] No [CLARIFY] markers remain in spec or plan
      - [ ] Requirements are testable and unambiguous
      - [ ] All acceptance scenarios are fully defined
      - [ ] Edge cases identified for each coding slice
      - [ ] Dependencies and assumptions documented
      - [ ] Success criteria are measurable and achievable

   d. **Task & Implementation Readiness**:
      - [ ] Each coding slice has all needed tasks in tasks.md
      - [ ] Task dependencies properly ordered
      - [ ] Parallelization opportunities marked with [P]
      - [ ] Slice-specific tasks marked with [SL1], [SL2], etc.
      - [ ] Implementation tasks trace back to specification items
      - [ ] Test tasks included where needed

   e. **D3-Kit Principles Compliance**:
      - [ ] Intent-first development evident throughout
      - [ ] Executable specifications possible (unambiguous requirements)
      - [ ] Task-oriented approach followed
      - [ ] Parallel exploration opportunities identified
      - [ ] Test-first thinking applied where appropriate
      - [ ] No speculation beyond original requirements

   f. **Cross-Artifact Consistency**:
      - [ ] Spec, plan, and tasks are aligned
      - [ ] Developer intent preserved across all artifacts
      - [ ] Technical decisions in plan support spec requirements
      - [ ] Tasks implement the planned approach
      - [ ] Success criteria are verifiable in implementation

5. **Include validation guidance** for each checklist item:
   - How to verify the item is complete
   - What to look for when checking the item
   - Examples of proper vs improper implementation

6. **Add workflow guidance**:
   - When to use this checklist
   - How often to run validation
   - What to do if items fail
   - How to update the checklist as the project evolves

7. **Report checklist creation**: Output path to the generated checklist and instructions for use:
   - Path to checklist file
   - How to apply the checklist to D3 artifacts
   - How to update checklist for new domains or requirements
   - Integration with D3 workflow

## D3-Kit Quality Focus Areas

- **Developer Intent Verification**: Ensure intent is preserved throughout all artifacts
- **Coding Slice Quality**: Verify each slice is well-defined and independently viable
- **Process Compliance**: Confirm adherence to D3-Kit principles
- **AI-Process Optimization**: Ensure artifacts are clear and unambiguous for AI processing
- **Traceability**: Verify all elements can be traced back to original intent

## Key Guidelines

- Create checklists that are specific to the domain when specified in $ARGUMENTS
- Focus on measurable, objective criteria that can be clearly validated
- Include guidance on how to address failed checklist items
- Ensure checklists support the D3 workflow and principles
- Make checklists actionable and practical to use