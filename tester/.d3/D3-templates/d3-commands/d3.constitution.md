---
description: Create or update project governing principles and development guidelines that will guide all subsequent D3 development.
handoffs:
  - label: Create Feature Specification
    agent: d3.spec
    prompt: Create a feature specification based on these principles
    send: true
  - label: Review Current Constitution  
    agent: d3.analyze
    prompt: Analyze how well current artifacts follow these principles
    send: true
scripts:
  sh: scripts/bash/d3-constitution.sh --json
  ps: scripts/powershell/d3-constitution.ps1 -Json
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## Outline

The `/d3.constitution` command creates or updates the project's governing principles document at `/memory/d3-constitution.md`. This constitution contains the immutable principles that guide all subsequent D3 development in the project.

Given the user's input in `$ARGUMENTS` describing the principles to create or update, do this:

1. **Setup**: Run `{SCRIPT}` from repo root and parse JSON for CONSTITUTION_PATH, MEMORY_DIR, and PRINCIPLES_UPDATE.

2. **Load existing constitution**: Read the current constitution file from `/memory/d3-constitution.md` if it exists, to understand the current principles and governance structure.

3. **Analyze user input** (`$ARGUMENTS`) to identify:
   - Specific principles to add or modify
   - Quality standards to establish
   - Testing requirements to define
   - User experience guidelines to implement
   - Performance requirements to set
   - Architectural constraints to enforce

4. **Update or create constitution** following the D3-Kit Constitution structure:
   - **Core Principles** section with numbered articles
   - **Implementation Standards** section
   - **Governance** section with amendment procedures
   - Maintain versioning and ratification information

5. **Apply D3-Kit principles during constitution creation**:
   - **Intent-First Development**: Principles should guide developer intent
   - **Executable Specifications**: Principles must be clear and actionable
   - **Continuous Validation**: Include validation and compliance measures
   - **Task-Oriented Development**: Principles should guide task creation
   - **Parallel Exploration**: Include guidelines for parallel development
   - **Test-First Thinking**: Include testing standards and requirements  
   - **No Speculation**: Only include concrete, actionable principles

6. **Structure the constitution with these sections**:

   a. **Core Principles**: 7-9 fundamental principles that will guide all development:
      - Intent-First Development
      - Executable Specifications
      - Continuous Validation
      - Task-Oriented Development
      - Parallel Exploration
      - Test-First Thinking
      - No Speculation
      - [Additional principles from user input]

   b. **Implementation Standards**: Concrete standards for code quality, documentation, etc.

   c. **Quality Gates**: Validation checkpoints that ensure compliance with principles

   d. **Governance**: Procedures for updating the constitution while maintaining stability

7. **Validate the new constitution**:
   - Ensure all principles are actionable and measurable
   - Verify that principles support the D3 workflow
   - Confirm that principles will guide AI-assisted development effectively
   - Check that principles emphasize developer intent and coding slices

8. **Write the constitution** to `/memory/d3-constitution.md`, replacing any existing content with the new principles derived from user input.

9. **Report constitution update**: Output the path to the updated constitution and summary of key principles:
   - Number of core principles established
   - Key quality standards defined
   - Validation procedures established
   - How these principles will guide future D3 development

## D3-Kit Constitution Focus Areas

- **Developer Intent Guidance**: Principles should support and enhance focus on developer intent
- **AI-Process Optimization**: Principles should be structured for AI understanding and application
- **Quality Standards**: Include measurable standards for code, testing, and architecture
- **Process Consistency**: Principles should ensure consistent application of D3 methodology
- **Flexibility Within Structure**: Maintain immutable core while allowing application flexibility
- **Parallel Development Support**: Include principles that enable parallel exploration and execution

## Key Guidelines

- Create principles that are immutable in concept but flexible in application
- Ensure all principles support the D3 workflow and developer intent focus
- Write principles that are actionable and measurable
- Include governance procedures for future updates
- Structure principles to guide both human and AI decision-making