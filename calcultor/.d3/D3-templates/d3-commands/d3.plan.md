---
description: Execute the D3 implementation planning workflow using the plan template to generate design artifacts with focus on parallel exploration.
handoffs:
  - label: Create Tasks
    agent: d3.tasks
    prompt: Break the plan into tasks
    send: true
scripts:
  sh: scripts/bash/d3-plan.sh "{ARGS}"
  ps: scripts/powershell/d3-plan.ps1 "{ARGS}"
---

# /d3.plan - Create Implementation Plan

## CRITICAL: Execute Script First

**DO NOT manually fill out the template.** Execute the script to generate the plan.

### Step 1: Execute the Script

Provide the feature directory path (from `/d3.intend` output):

**On Linux/Mac:**
```bash
bash scripts/bash/d3-plan.sh "d3-features/001-feature-name"
```

**On Windows:**
```powershell
. scripts/powershell/d3-plan.ps1 "d3-features/001-feature-name"
```

### Step 2: Parse JSON Response

Expected output:
```json
{
  "status": "success",
  "message": "Implementation plan created successfully",
  "data": {
    "feature_dir": "d3-features/001-feature-name",
    "feature_name": "feature-name",
    "plan_file": "d3-features/001-feature-name/plan.md",
    "spec_file": "d3-features/001-feature-name/spec.md"
  }
}
```

### Step 3: Fill in the Implementation Plan

Open the generated plan.md file and fill in:

1. **High-Level Design Approach**: Based on the spec, outline the overall architecture
2. **Key Design Decisions**: What major technical choices need to be made
3. **Phases/Milestones**: Break implementation into phases if needed
4. **Parallel Work Opportunities**: Identify areas that can be developed in parallel
5. **Risk Mitigation**: Address potential technical risks and how to mitigate them
6. **Dependency Map**: Identify external dependencies or integration points

### Step 4: Confirm to User

```
✓ Created plan.md for feature: 001-feature-name
  Location: d3-features/001-feature-name/plan.md
  
✓ Filled in:
  - High-level design approach
  - Key design decisions
  - Implementation phases
  
Next: Run /d3.tasks to break plan into executable tasks
```

---

## What the Script Does

1. Validates that spec.md exists
2. Loads the plan template
3. Fills in feature name and creation date
4. Creates `plan.md` file in the feature directory
5. Returns file path in JSON

**Agent must then fill in the plan content from the spec.**

## Requirements

- Must have run `/d3.intend` first to create spec.md
- Feature directory must exist: `d3-features/NNN-feature-name/`

## Next Step

After plan is filled in, run `/d3.tasks` to break the plan into executable tasks.
