---
description: Create a new feature specification from a user description
scripts:
  sh: scripts/bash/d3-intend.sh "{ARGS}"
  ps: scripts/powershell/d3-intend.ps1 "{ARGS}"
---

# /d3.intend - Create Feature Specification

## CRITICAL: Execute Script First

**DO NOT manually fill out the template below.** Instead, you MUST execute the script to create the spec file.

### Step 1: Execute the Script

Run the script with the user's description:

**On Linux/Mac (bash):**
```bash
bash scripts/bash/d3-intend.sh "$ARGUMENTS"
```

**On Windows (PowerShell):**
```powershell
. scripts/powershell/d3-intend.ps1 "$ARGUMENTS"
```

### Step 2: Parse the JSON Output

The script will return JSON like:
```json
{
  "status": "success",
  "message": "Feature specification created successfully",
  "data": {
    "branch_name": "001-feature-name",
    "feature_number": 1,
    "feature_name": "feature-name",
    "feature_dir": "/path/to/d3-features/001-feature-name",
    "spec_file": "/path/to/d3-features/001-feature-name/spec.md"
  }
}
```

### Step 3: REQUIRED - Fill in the Specification

**This step is MANDATORY. The script only creates the template. You must fill in the content.**

Open the created spec.md file and fill in these sections based on the user's description:

1. **Developer Intent & User Scenarios**: 
   - What problem is this solving?
   - What are the main ways users will use this?
   - Who is the target user?
   - Example: For "calculator in html that has a nice unique interface and works offline":
     - Intent: Create a calculator accessible without internet
     - Primary scenario: User opens browser and calculates math problems offline
     - Target: Anyone who needs to calculate without network access

2. **Functional Requirements** - Extract specific requirements from description:
   - Example for calculator: "Works offline", "Nice unique interface", "HTML-based"
   - Make them measurable: "Must function without internet connection", "UI must be visually distinct from standard calculators", "Built with HTML/CSS/JavaScript"

3. **Edge Cases & Clarifications** - Identify unclear points:
   - What operations should the calculator support?
   - How many decimal places?
   - Should it save calculation history?
   - What happens when offline - does it pre-cache resources?
   - Browser compatibility requirements?

4. **Key Entities** - What data/objects does this feature work with?
   - Example: Calculator input, calculation results, operation history

5. **Success Criteria** - How will you know this is done?
   - Example: "Calculator performs all basic operations correctly", "Works without network connection", "Has unique visual design"

### Step 4: Confirm to User

Report back with:
- ✓ Feature name and number
- ✓ Path to created spec.md file  
- ✓ What sections were filled in
- ✓ Any clarifications needed from user

**Example response:**
```
✓ Created spec.md for feature: 001-offline-calculator
  Location: d3-features/001-offline-calculator/spec.md
  Branch: 001-offline-calculator
  
✓ Filled in:
  - Developer Intent & User Scenarios
  - Functional Requirements (basic)
  - Edge Cases identified
  
⚠ Clarifications needed:
  - Target user devices/browsers
  - Data persistence requirements
```

---

## What the Script Does

The d3-intend script:
1. Generates a feature name from the description (2-4 word kebab-case)
2. Finds the next available feature number
3. Creates `d3-features/NNN-feature-name/` directory
4. Loads the spec template
5. Fills in feature information (name, date, description)
6. Creates `spec.md` file
7. Optionally creates a git branch
8. Returns JSON with file paths

## User Input

The feature description provided by the user is: `$ARGUMENTS`

---

## If Script Execution Fails

If the script returns an error:
1. Check that `.d3/scripts/` directory exists
2. Verify `d3-features/` directory is writable
3. Check that templates exist in `D3-templates/`
4. Show the user the error message from the script

## Reference: What Gets Created

The script creates spec.md with these sections:
- Feature Information (branch, date, status) - **Auto-filled by script**
- Developer Intent & User Scenarios - **Agent fills in from user description**
- Edge Cases & Clarifications - **Agent identifies from user description**
- Functional Requirements - **Agent extracts from user description**
- Key Entities - **Agent identifies entities mentioned**
- Success Criteria - **Agent defines based on feature description**
- Intent Alignment Check - **User reviews**
- Out of Scope - **Agent identifies limitations**
- Questions & Clarifications - **Agent lists open questions**

## Important: Agent Workflow

This command is not complete until:
1. ✓ Script runs successfully and creates files
2. ✓ Agent opens the generated spec.md
3. ✓ Agent fills in all relevant sections from user's description
4. ✓ Agent asks clarifying questions if needed
5. ✓ User has a complete feature specification ready for d3.plan
